<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title data-i18n="title">中共プロパガンダ・テキストジェネレーター</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/i18next@23.7.6/dist/umd/i18next.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/i18next-browser-languagedetector@7.2.0/dist/umd/i18nextBrowserLanguageDetector.min.js"></script>
  <script src="app.js"></script>
</head>
<body>
<div class="app">
  <aside>
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
      <h2 style="font-size:14px;margin:4px 0 10px;" data-i18n="settings">設定</h2>
      <select id="languageSelect" style="font-size: 11px; padding: 4px 6px;">
        <option value="ja">日本語</option>
        <option value="en">English</option>
        <option value="zh-Hant">繁體中文</option>
        <option value="zh-Hans">简体中文</option>
        <option value="ko">한국어</option>
      </select>
    </div>

    <!-- 背景画像選択 -->
    <div class="field">
      <label data-i18n="backgroundSelect">背景画像選択</label>
      <select id="bgSelect">
        <option value="background.png" data-i18n="backgroundForeignAffairs">外交部ver</option>
        <option value="background2.png" data-i18n="backgroundDefense">国防部ver</option>
        <option value="background3.png" data-i18n="backgroundMaoNing">毛宁ver</option>
      </select>
      <div class="muted" data-i18n="backgroundSelectDesc">背景を切り替え</div>
    </div>

    <!-- 国旗選択（毛宁verのときのみ表示） -->
    <div class="field" id="flagSelectContainer" style="display: none;">
      <label data-i18n="flagSelect">ヘッダー国旗選択</label>
      <div class="inline">
        <div class="field">
          <label data-i18n="flag1">国旗1</label>
          <select id="flag1">
            <option value="" data-i18n="loading">読み込み中...</option>
          </select>
        </div>
        <div class="field">
          <label data-i18n="flag2">国旗2</label>
          <select id="flag2">
            <option value="" data-i18n="loading">読み込み中...</option>
          </select>
        </div>
      </div>
      <div class="muted" data-i18n="flagSelectDesc">毛宁verのときのみ表示</div>
    </div>
    
    <div class="field">
      <label data-i18n="mainText">メインテキスト</label>
      <textarea id="text" data-i18n="[placeholder]mainTextPlaceholder" placeholder="“日本は再び軍国主義の過ちを繰り返すつもりなのか…”"></textarea>
    </div>

    <!-- 選択部分を金色にするボタン -->
    <div class="field">
      <button class="btn" id="highlightGoldBtn" type="button" data-i18n="highlightGold">
        選択部分を金色にする
      </button>
      <div class="muted" data-i18n="highlightGoldDesc">
        テキスト内で範囲選択してから押すと、その部分だけ金色で描画されます。
      </div>
    </div>

    <div class="inline">
      <div class="field">
        <label data-i18n="fontSize">本文フォントサイズ(px)</label>
        <input id="fontSize" type="number" value="80" min="24" max="160" step="2">
      </div>
      <div class="field">
        <label data-i18n="lineHeight">行間(倍率)</label>
        <input id="lineHeight" type="number" value="1.25" step="0.05" min="1" max="2">
      </div>
    </div>

    <div class="inline">
      <div class="field">
        <label data-i18n="marginX">左右マージン(%)</label>
        <input id="marginX" type="number" value="12" min="5" max="25">
      </div>
      <div class="field">
        <label data-i18n="startY">上からの開始位置(%)</label>
        <input id="startY" type="number" value="22" min="10" max="40">
      </div>
    </div>

    <div class="inline">
      <div class="field">
        <label data-i18n="textColor">テキスト色</label>
        <input id="textColor" type="color" value="#fdf5e6">
      </div>
      <div class="field">
        <label data-i18n="shadowBlur">影(ぼかし px)</label>
        <input id="shadowBlur" type="number" value="6" min="0" max="30">
      </div>
    </div>

    <div class="field">
      <label data-i18n="font">フォント</label>
      <select id="fontFamily">
        <option value="serif" data-i18n="fontSerif">明朝体風 (Noto Serif JP)</option>
        <option value="sans" data-i18n="fontSans">ゴシック体風 (Noto Sans JP)</option>
      </select>
    </div>

    <div class="field">
      <label data-i18n="quoteMode">引用符</label>
      <select id="quoteMode">
        <option value="both" data-i18n="quoteBoth">" … " を付ける</option>
        <option value="none" data-i18n="quoteNone">付けない</option>
      </select>
    </div>

    <div class="field">
      <label data-i18n="footerText">フッターテキスト（任意・一番下）</label>
      <input id="footerText" type="text" data-i18n="[placeholder]footerTextPlaceholder" placeholder="中国外交部報道官 2025年11月13日">
      <div class="muted" data-i18n="footerTextDesc">空ならフッター非表示</div>
    </div>

    <div class="field">
      <label data-i18n="footerSize">フッターフォントサイズ(px)</label>
      <input id="footerSize" type="number" value="32" min="18" max="80">
    </div>

    <div style="margin-top:10px;">
      <button class="btn" id="renderBtn" data-i18n="render">再描画</button>
      <button class="btn primary" id="saveBtn" data-i18n="save">JPGとして保存</button>
      <div class="muted" data-i18n="saveDesc">右クリックで保存したほうが早いかも</div>
    </div>
  </aside>

  <main>
    <header data-i18n="header">中共プロパガンダ・テキストジェネレーター</header>
    <div class="canvas-wrap">
      <canvas id="cv"></canvas>
    </div>
  </main>
</div>
</body>
</html>
